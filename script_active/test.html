

<html>

<head>
	
<meta charset="UTF-8">
<title>脚本活动</title>


<script src="./static/js/jquery-3.1.1.js"></script>
<script src="./static/js/jquery.md5.js"></script>


</head>

<body>

	

<div id="servers"></div>








<script type="text/javascript">



function get_op(){
    var flag = true;
    function select_all(){
        $("input:checkbox").each(function(){
        $(this).prop("checked", flag);}); 
        flag = !flag;
        $("#select_all").text({true: "全选",
                                false: "取消"}[flag]);
    }
    return select_all;
}

var servers =[{"id":13, "name": "ajck"}, {"id": 15, "name": "tom"}];

var ss = "<a class='btn_submit' id='select_all' href='#'>全选</a>";
ss += "<a class='btn_submit' id='add_select' href='#'>添加</a>";
for (var i=0; i<servers.length; i++){

        ss += "<input type='checkbox' value='"+ servers[i].id +"'/><span>" + servers[i].name + "</span>";

}
$("#servers").html(ss);
$("#select_all").bind("click", get_op());
$("#add_select").bind("click", add_select);


function show_active_name(){
var hid = $("#acthistory").val();
$("#active_name").val($("select option[value='"+ hid +"']").text());
$("#active_type").val(get_active_type(hid));
$("#script_name").val(get_act_script(hid));
}


function add_select(){
    var selected = [];
    $("input:checkbox").each(function(){
    console.log($(this));
    console.log($(this).prop('checked'));

    if ($(this).prop("checked")){
        //alert($(this).val())
        selected.push($(this).val());
        console.log($(this).next("span").text());

       }
   });
}

function get_curr_sec(){
    return Math.round(new Date().getTime()/1000); 
}

function test_akey(){

    var atime = "1516006695"
    var passwd = $.md5("test");
    var akey = $.md5($.md5("test" + passwd) + atime, + "test");

    console.log("the passwd is: " + passwd + "\nthe key is :" + akey)
}

test_akey();


</script>


</body>


</html>

